'use strict';

const S3270Field = module.exports = function(lineNum, startIdx) {
    this.lineNum = lineNum;
    this.startIdx = startIdx;
    this.endIdx = startIdx;
    this.val = "";
}

S3270Field.prototype.setValue = function(value) {
    if (typeof value === "undefined" || value === null) {
        throw "Undefined value";
    } else if (typeof this.protected === "undefined") {
        throw "Not an editable field";
    } else if (this.protected) {
        throw "Field protected";
    } else if (value.length > (this.endIdx - this.startIdx)) {
        throw "Field length exceeded for line " + this.lineNum + " (insert " + value + " in " + this.startIdx + " - " + this.endIdx + ")";
    }

    this.newVal = value;
}

S3270Field.prototype.getValue = function() {
    if (typeof this.newVal !== "undefined") {
        return this.newVal;
    }

    return this.val;
}

S3270Field.prototype.hasNewValue = function() {
    return (typeof this.newVal !== "undefined");
}

