'use strict';

const S3270 = require('..');
const fs = require('fs');

const terminal = S3270.connect('66.119.255.93:9923');

terminal.status().then((status) => { console.log(JSON.stringify(status)) });

terminal.readScreen().then((screen) => {
    return terminal.sendCommand("ascii").then((ascii) => { console.log(ascii) });
}).then(() => {
    return terminal.readScreen();
}).then((screen) => {
    let field = screen.editableFieldAfterText(/ENTER APPLICATION NAME/);  
    field.setValue("TSO");
    return terminal.applyScreen(screen);
}).then(() => {
    return terminal.sendCommand("enter");
}).then(() => {
    return terminal.sendCommand("wait(InputField)");
}).then(() => {
    return terminal.readScreen();
}).then(() => {
    return terminal.sendCommand("ascii").then((ascii) => { console.log(ascii) });
});