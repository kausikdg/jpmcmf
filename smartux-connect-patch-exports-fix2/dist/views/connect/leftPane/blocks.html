<div class="header target">
    <span ng-if="!showSearch">Logic Blocks</span>
    <span class="search-bar" ng-if="showSearch">
        <input type="text" placeholder="Search Blocks" ng-model="search.name" auto-focus>
    </span>
    <button class="fa fa-search" ng-click="toggleSearch()" title="Search Logic Blocks"></button>
</div>

<div class="connect content">
    <div ng-repeat="blockGroup in blockGroups">
        <details open>
            <summary class="connectHeader bg-grey">
            {{(blockGroup.type).toUpperCase()}}: <span class="text-black">{{(blockGroup.name).toUpperCase()}}</span>
            </summary>
            <!-- if built in block -->
            <div class="event-block-group">
                <block ng-repeat="logicBlock in blockGroup.blocks" ng-if="blockGroup.id === 'builtin'" dragid="makeDragId(blockGroup, logicBlock)" logic-block="logicBlock" item="logicBlock">
                </block>
            </div>
            <!-- if web block -->
            <div class="event-block-group">
                <div ng-repeat="pageGroup in blockGroup.blocks" ng-if="blockGroup.type === 'web'">
                    <block ng-repeat="logicBlock in pageGroup" ng-if="!pageGroup[0].pageModel" dragid="makeDragId(blockGroup, logicBlock)" logic-block="logicBlock" item="logicBlock">
                    </block>
                    <details open ng-if="pageGroup[0].pageModel">
                        <summary class="connectHeader">
                                <i class="fa fa-cubes"></i><span class="text-black">{{toTitleCase(pageGroup[0].pageModel)}}</span>
                        </summary>
                        <block ng-repeat="logicBlock in pageGroup" dragid="makeDragId(blockGroup, logicBlock)" logic-block="logicBlock" item="logicBlock">
                        </block>
                    </details>
                </div>
            </div>
            <!-- if api block -->
            <div class="event-block-group">
                <block ng-repeat="logicBlock in blockGroup.blocks" ng-if="blockGroup.type === 'api'" dragid="makeDragId(blockGroup, logicBlock)" logic-block="logicBlock" item="logicBlock">
                </block>
            </div>
        </details>
    </div>
</div>

