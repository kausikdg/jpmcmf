<div class="condition-builder">
    <table>
        <tbody>
            <tr class="logicOperators">
                <td colspan="3"> Satisfy
                    <div class="custom-radio">
                        <input type="radio" id="any" ng-model="$ctrl.conditionData.operator" value="||">
                        <label for="any">
                            Any
                        </label>
                        <input type="radio" id="all" ng-model="$ctrl.conditionData.operator" value="&&">
                        <label for="all">
                            All
                        </label>
                    </div>
                    of the following:
            </td>
            </tr>
            <tr class="conditions" ng-repeat="condition in $ctrl.conditionData.children">
                <td>
                    <div class="custom-dropdown">
                        <select ng-class="{filler: condition.lhsSource.dd1Filler}" ng-model="condition.lhsSource" ng-options="item as item.name group by $ctrl.groupBy(item) for item in $ctrl.dataSource" ng-change="$ctrl.selectLHProp(condition)">
                        </select>
                    </div>
                </td>

                <td ng-show="condition.lhsSource.type === 'Value'">
                    <input type="text" ng-model="condition.lhs" ng-change="$ctrl.lhsValueChange(condition)">
                </td>
                

                <td ng-show="condition.lhsSource.type !== 'Value'">
                    <div class="custom-dropdown">
                        <select ng-class="{filler: condition.tempLhs.dd2Filler}" ng-model="condition.tempLhs" ng-options="item as item.name group by item.scope for item in condition.dd2Source.properties" ng-change="$ctrl.selectLHChild(condition, condition.tempLhs)">
                        </select>
                    </div>
                </td>

                <td>
                    <div class="custom-dropdown">
                        <select ng-options="operator.value as operator.name for operator in $ctrl.operators | filter: $ctrl.filterOperators(condition)" ng-model="condition.test" ng-change="$ctrl.changeOperator(condition)">
                        </select>
                    </div>
                </td>

                <td ng-if="condition.rhsSource && condition.test !== 'isTrue' && condition.test !== 'isFalse'">
                    <div class="custom-dropdown">
                        <select ng-class="{filler: condition.rhsSource.dd4Filler}" ng-model="condition.rhsSource" ng-options="item as item.name group by $ctrl.groupBy(item) for item in $ctrl.dataSource" ng-change="$ctrl.selectRHProp(condition)">
                        </select>
                    </div>
                </td>

                <td ng-if="condition.rhsSource && condition.test !== 'isTrue' && condition.test !== 'isFalse'" ng-show="condition.rhsSource.type === 'Value'">
                    <input type="text" ng-model="condition.rhs" ng-change="$ctrl.rhsValueChange(condition)">
                </td>

                <td ng-if="condition.rhsSource && condition.test !== 'isTrue' && condition.test !== 'isFalse'" ng-show="condition.rhsSource.type !== 'Value'">
                    <div class="custom-dropdown">
                        <select ng-class="{filler: condition.tempRhs.dd5Filler}" ng-model="condition.tempRhs" ng-options="item as item.name for item in condition.dd5Source.properties | filter: { name: '!isStarted()' } track by $index" ng-change="$ctrl.selectRHChild(condition, condition.tempRhs)">
                        </select>
                    </div>
                </td>

                <td>
                <div class="addDelete">
                    <button ng-click="$ctrl.addCondition()"> + </button>
                    <button ng-click="$ctrl.deleteCondition($index)" ng-show="$ctrl.conditionData.children.length > 1">
                        -
                    </button>
                </div>
                </td>
                <td>
                    <div class="missing-items">
                        <i ng-if="condition.leftHandErrorMessage || condition.rightHandErrorMessage" class="fa fa-long-arrow-right"></i>
                        <span ng-if="condition.leftHandErrorMessage">{{condition.leftHandErrorMessage}}</span>
                        <span ng-if="condition.rightHandErrorMessage">{{condition.rightHandErrorMessage}}</span>
                    </div>
                </td>
            </tr>
        </tbody>
    </table>
</div>

