<div class="heading">
    <h1>
        Edit Screen Model
        <strong ng-if="!!model.selectedScreenModel">&gt; {{ model.selectedScreenModel.id }}</strong>
    </h1>
    <span ng-if="countUnsaved() > 0">
        You have <strong>{{countUnsaved()}}</strong> unsaved operation(s)
    </span>
</div>

<div class="content">
    <div class="tabs">

        <!-- SCREEN MODELS: --------------------------------------->

        <div class="tab">
            <input type="radio" id="tab-screen-models" class="marker" value="screen-models" ng-model="model.activeTab">
            <label for="tab-screen-models" class="target">
                <span class="title"><i class="fa fa-database"></i>Screen Models</span>
            </label>
            <div class="content">
                <div class="row">
                    <div class="col col-xs-5">
                        <div class="box-nested no-padding-left">
                            <ul class="tree">
                                <li ng-repeat="screenModel in screenModels">
                                    <span class="item" ng-click="model.selectedScreenModel = screenModel" ng-class="{'selected': model.selectedScreenModel === screenModel}">
                                        <i class="fa fa-sitemap"></i>
                                        <span class="label">{{screenModel.id}}</span>
                                    </span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col col-xs-7">
                        <div class="box-nested">
                            <ul class="tree">
                                <li ng-if="model.selectedScreenModel" collapsible>
                                    <input class="marker" type="checkbox" checked="checked">
                                    <label class="target"></label>
                                    <span class="item">
                                        <i class="fa fa-database"></i>
                                        {{model.selectedScreenModel.id}}
                                        <span class="controls">
                                            <button class="fa fa-plus" title="New Data Entry" ng-click="addProperty(model.selectedScreenModel)">
                                            </button>
                                        </span>
                                    </span>
                                    <ul class="content" screen-model-tree options="propertiesTreeOptions" tree-root>
                                        <li ng-repeat="prop in model.selectedScreenModel.properties" tree-node="prop" collapsible></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- COMMON MODELS: --------------------------------------->

        <div class="tab">
            <input type="radio" id="tab-shared-models" class="marker" value="shared-models" ng-model="model.activeTab">
            <label for="tab-shared-models" class="target">
                <span class="title"><i class="fa fa-sitemap"></i>Shared Models</span>
            </label>
            <div class="content">
                <div class="row">
                    <div class="col col-xs-5">
                        <div class="box-nested no-padding-left">
                            <ul class="tree">
                                <li ng-repeat="sharedModel in sharedModels">
                                    <span class="item" ng-click="model.selectedSharedModel = sharedModel" ng-class="{'selected': model.selectedSharedModel === sharedModel}">
                                        <i class="fa fa-sitemap"></i>
                                        <span class="label">{{sharedModel.id}}</span>
                                        <span class="controls">
                                            <button class="fa fa-pencil" title="Edit Model" ng-click="editSharedModel(sharedModel)"></button>
                                            <button class="fa fa-trash" title="Delete Model" ng-click="deleteSharedModel(sharedModel)"></button>
                                        </span>
                                    </span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col col-xs-7">
                        <div class="box-nested">
                            <ul class="tree">
                                <li ng-if="model.selectedSharedModel" collapsible>
                                    <input class="marker" type="checkbox" checked="checked">
                                    <label class="target"></label>
                                    <span class="item">
                                        <i class="fa fa-sitemap"></i>
                                        {{model.selectedSharedModel.id}}
                                        <span class="controls">
                                            <button class="fa fa-plus" title="New Data Entry" ng-click="addProperty(model.selectedSharedModel)">
                                            </button>
                                        </span>
                                    </span>
                                    <ul class="content" screen-model-tree options="propertiesTreeOptions" tree-root>
                                        <li ng-repeat="prop in model.selectedSharedModel.properties" tree-node="prop" collapsible></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<div class="buttons">
    <button class="button clear pull-left" ng-click="addSharedModel()" ng-if="model.activeTab === 'shared-models'">
        <i class="fa fa-plus"></i>Add Shared Model
    </button>
    <button class="button" ng-click="save()" ng-disabled="countUnsaved() === 0">Save
    </button>
    <button class="button clear" ng-click="close()">Close
    </button>
</div>
